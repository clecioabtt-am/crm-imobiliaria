<!doctype html>
<html lang="pt-br"><head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dashboard - CRM</title>
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="container">
  <div id="nav"></div>

  <div class="card">
    <h2>Dashboard</h2>
    <p class="small">Resumo rápido (leads, imóveis, negócios e tarefas).</p>
    <div class="grid">
      <div class="card"><div class="badge">Leads</div><h3 id="leads">...</h3></div>
      <div class="card"><div class="badge">Imóveis</div><h3 id="props">...</h3></div>
      <div class="card"><div class="badge">Negócios</div><h3 id="deals">...</h3></div>
      <div class="card"><div class="badge">Tarefas</div><h3 id="tasks">...</h3></div>
    </div>
  </div>
</div>

<script src="js/app.js"></script>
<script>
requireAuth();
document.getElementById("nav").innerHTML = navHtml();

(async () => {
  const [contacts, props, deals, tasks] = await Promise.all([
    api("/api/contacts"),
    api("/api/properties"),
    api("/api/deals"),
    api("/api/tasks"),
  ]);
  document.getElementById("leads").textContent = contacts.length;
  document.getElementById("props").textContent = props.length;
  document.getElementById("deals").textContent = deals.length;
  document.getElementById("tasks").textContent = tasks.length;
})();
</script>
</body></html>
